<div class="ui active dimmer">
  <div class="ui text loader">Loading</div>
</div>

<div class="overview">
  <div class="ui text menu">
    <a class="item" href="/">
      <i class="home icon"></i>Home
    </a>
  </div>

  <div class="overview-stats-container">

    <div class="ui twelve column doubling centered grid">
      <div class="three wide column ui huge statistic segment" data-stat ="no_priority">
        <div class="value">
          42
        </div>
        <div class="label">
          tbd
        </div>
      </div>
      <div class="three wide column ui huge statistic segment" data-stat ="since_mon_needs_pts">
        <div class="value">
          42
        </div>
        <div class="label">
          tbd
        </div>
      </div>
      <div class="three wide column ui huge statistic segment" data-stat ="since_mon">
        <div class="value">
          42
        </div>
        <div class="label">
          TBD
        </div>
      </div>
    </div>
    <div class="ui twelve column doubling centered grid">
      <div class="three wide column ui huge statistic segment" data-stat ="high_priority">
        <div class="value">
          42
        </div>
        <div class="label">
          TBD
        </div>
      </div>
      <div class="three wide column ui huge statistic segment" data-stat="hp_30_days">
        <div class="value">
          42
        </div>
        <div class="label">
          TBD
        </div>
      </div>
      <div class="three wide column ui huge statistic segment" data-stat="np_365_days">
        <div class="value">
          42
        </div>
        <div class="label">
          TBD
        </div>
      </div>
    </div>
  
  </div>

</div>



</div>



<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script type="text/javascript">

$.ajax('overview_stats.json', {
  success: function(response) {
    response_keys = Object.keys(response)
    console.log(response_keys)

    _.each($('.statistic.segment'), function(value){
      stat = $(value).data('stat')
      
      if (_.contains(response_keys, stat)){
        $("div[data-stat='"+stat+"']").children('.value').html(response[stat].count)
        $("div[data-stat='"+stat+"']").children('.label').html(response[stat].label)
        $("div[data-stat='"+stat+"']").data('link', response[stat].link)
      }
    });
    $('div.active.dimmer').fadeOut(400);
    $('.overview').fadeIn(1000);
  },
  error: function(response) {
    console.log("Error :(")
  }
});

$('.statistic.segment').click(function(){
  window.location = ($(this).data('link'));
})



</script>